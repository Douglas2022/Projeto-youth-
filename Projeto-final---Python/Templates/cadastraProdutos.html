{% extends 'base.html' %}

{% block conteudo %}
<h2>Cadastro de Produtos</h2>

{% if mensagem %}
    <p class="mensagem">{{ mensagem }}</p>
{% endif %}

<form method="POST">
    <input type="text" name="nome" placeholder="Nome" required>
    <input type="text" name="marca" placeholder="Marca" required>
    <input type="text" name="tipo" placeholder="Tipo" required>
    <input type="number" step="0.01" name="preco" placeholder="Preço" required>
    <input type="text" name="link" placeholder="Link da imagem" required>
    <button type="submit" class="btn-cadastrar">Cadastrar Produto</button>
</form>

<h3>Produtos Cadastrados</h3>
<table>
    <thead>
        <tr>
            <th>ID</th>
            <th>Nome</th>
            <th>Marca</th>
            <th>Tipo</th>
            <th>Preço</th>
            <th>Imagem</th>
            <th>Ações</th>
        </tr>
    </thead>
    <tbody>
        {% for produto in produtos %}
        <tr>
            <td>{{ produto.id }}</td>
            <td>{{ produto.nome }}</td>
            <td>{{ produto.marca }}</td>
            <td>{{ produto.tipo }}</td>
            <td>R$ {{ "%.2f"|format(produto.preco) }}</td>
            <td><a href="{{ produto.link }}" target="_blank">Ver imagem</a></td>
            <td>
                <form action="{{ url_for('excluir_produto', id=produto.id) }}" method="POST" onsubmit="return confirm('Deseja realmente excluir este produto?');">
                    <button type="submit" class="btn-excluir">Excluir</button>
                </form>
            </td>
        </tr>
        {% endfor %}
    </tbody>
</table>

<style>
    body { font-family: Arial, sans-serif; margin: 20px; }
    table { width: 100%; border-collapse: collapse; margin-top: 20px; }
    th, td { padding: 10px; text-align: center; border: 1px solid #ddd; }
    th { background-color: #0056b3; color: white; }
    tr:nth-child(even) { background-color: #f8f9fa; }
    .btn-excluir { background-color:#dc3545; color:white; border:none; padding:5px 10px; border-radius:5px; cursor:pointer; }
    .btn-cadastrar { background-color:#d80b0b; color:white; border:none; padding:8px 15px; border-radius:5px; cursor:pointer; }
    .mensagem { color: rgb(231, 13, 13); font-weight: bold; margin-top: 10px; text-align:center; }
</style>
{% endblock %}
